openapi: 3.1.0
info:
  title: Human Design API
  version: 1.7.4
paths:
  /calculate:
    get:
      summary: Calculate Hd
      operationId: calculate_hd_calculate_get
      security:
      - HTTPBearer: []
      parameters:
      - name: year
        in: query
        required: true
        schema:
          type: integer
          description: Birth year
          default: 1968
          title: Year
          example: 1968
        description: Birth year
      - name: month
        in: query
        required: true
        schema:
          type: integer
          description: Birth month
          default: 2
          title: Month
          example: 2
        description: Birth month
      - name: day
        in: query
        required: true
        schema:
          type: integer
          description: Birth day
          default: 21
          title: Day
          example: 21
        description: Birth day
      - name: hour
        in: query
        required: true
        schema:
          type: integer
          description: Birth hour
          default: 11
          title: Hour
          example: 11
        description: Birth hour
      - name: minute
        in: query
        required: true
        schema:
          type: integer
          description: Birth minute
          default: 0
          title: Minute
          example: 0
        description: Birth minute
      - name: second
        in: query
        required: false
        schema:
          type: integer
          description: Birth second (optional, default 0)
          default: 0
          title: Second
          example: 0
        description: Birth second (optional, default 0)
      - name: place
        in: query
        required: true
        schema:
          type: string
          description: Birth place (city, country)
          default: Kirikkale, Turkey
          title: Place
          example: Kirikkale, Turkey
        description: Birth place (city, country)
      - name: gender
        in: query
        required: false
        schema:
          type: string
          description: Gender (optional)
          default: male
          title: Gender
        description: Gender (optional)
      - name: islive
        in: query
        required: false
        schema:
          type: boolean
          description: Whether the person is alive (true) or deceased (false)
          default: true
          title: Islive
        description: Whether the person is alive (true) or deceased (false)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CalculateResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /bodygraph:
    get:
      summary: Get Bodygraph Image
      operationId: get_bodygraph_image_bodygraph_get
      security:
      - HTTPBearer: []
      parameters:
      - name: year
        in: query
        required: true
        schema:
          type: integer
          description: Birth year
          default: 1968
          title: Year
        description: Birth year
      - name: month
        in: query
        required: true
        schema:
          type: integer
          description: Birth month
          default: 2
          title: Month
        description: Birth month
      - name: day
        in: query
        required: true
        schema:
          type: integer
          description: Birth day
          default: 21
          title: Day
        description: Birth day
      - name: hour
        in: query
        required: true
        schema:
          type: integer
          description: Birth hour
          default: 11
          title: Hour
        description: Birth hour
      - name: minute
        in: query
        required: true
        schema:
          type: integer
          description: Birth minute
          default: 0
          title: Minute
        description: Birth minute
      - name: second
        in: query
        required: false
        schema:
          type: integer
          description: Birth second (optional, default 0)
          default: 0
          title: Second
        description: Birth second (optional, default 0)
      - name: place
        in: query
        required: true
        schema:
          type: string
          description: Birth place (city, country)
          default: Kirikkale, Turkey
          title: Place
        description: Birth place (city, country)
      - name: fmt
        in: query
        required: false
        schema:
          type: string
          description: 'Image format: png, svg, jpg/jpeg'
          default: png
          title: Fmt
        description: 'Image format: png, svg, jpg/jpeg'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /transits/solar_return:
    get:
      summary: Get Solar Return
      operationId: get_solar_return_transits_solar_return_get
      security:
      - HTTPBearer: []
      parameters:
      - name: year
        in: query
        required: true
        schema:
          type: integer
          description: Birth year
          title: Year
        description: Birth year
      - name: month
        in: query
        required: true
        schema:
          type: integer
          description: Birth month
          title: Month
        description: Birth month
      - name: day
        in: query
        required: true
        schema:
          type: integer
          description: Birth day
          title: Day
        description: Birth day
      - name: hour
        in: query
        required: true
        schema:
          type: integer
          description: Birth hour
          title: Hour
        description: Birth hour
      - name: minute
        in: query
        required: false
        schema:
          type: integer
          description: Birth minute (default 0)
          default: 0
          title: Minute
        description: Birth minute (default 0)
      - name: second
        in: query
        required: false
        schema:
          type: integer
          description: Birth second (optional, default 0)
          default: 0
          title: Second
        description: Birth second (optional, default 0)
      - name: place
        in: query
        required: true
        schema:
          type: string
          description: Birth place (city, country)
          title: Place
        description: Birth place (city, country)
      - name: sr_year_offset
        in: query
        required: false
        schema:
          type: integer
          description: Calculate Solar Return for X years after birth. 0 is the current SR.
          default: 0
          title: Sr Year Offset
        description: Calculate Solar Return for X years after birth. 0 is the current SR.
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /transits/daily:
    get:
      summary: Get Daily Transit
      operationId: get_daily_transit_transits_daily_get
      security:
      - HTTPBearer: []
      parameters:
      - name: year
        in: query
        required: true
        schema:
          type: integer
          description: Birth year
          title: Year
        description: Birth year
      - name: month
        in: query
        required: true
        schema:
          type: integer
          description: Birth month
          title: Month
        description: Birth month
      - name: day
        in: query
        required: true
        schema:
          type: integer
          description: Birth day
          title: Day
        description: Birth day
      - name: hour
        in: query
        required: true
        schema:
          type: integer
          description: Birth hour
          title: Hour
        description: Birth hour
      - name: minute
        in: query
        required: false
        schema:
          type: integer
          description: Birth minute (default 0)
          default: 0
          title: Minute
        description: Birth minute (default 0)
      - name: second
        in: query
        required: false
        schema:
          type: integer
          description: Birth second (optional, default 0)
          default: 0
          title: Second
        description: Birth second (optional, default 0)
      - name: place
        in: query
        required: true
        schema:
          type: string
          description: Birth place (city, country)
          title: Place
        description: Birth place (city, country)
      - name: transit_year
        in: query
        required: true
        schema:
          type: integer
          description: Transit year to analyze
          title: Transit Year
        description: Transit year to analyze
      - name: transit_month
        in: query
        required: true
        schema:
          type: integer
          description: Transit month to analyze
          title: Transit Month
        description: Transit month to analyze
      - name: transit_day
        in: query
        required: true
        schema:
          type: integer
          description: Transit day to analyze
          title: Transit Day
        description: Transit day to analyze
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  meta:
                    type: object
                    properties:
                      transit_date_local:
                        type: string
                      transit_date_utc:
                        type: string
                      birth_date_utc:
                        type: string
                      birth_date:
                        type: string
                        description: "Birth date in ISO format"
                      create_date:
                        type: string
                        description: "Design/Creation date"
                      place:
                        type: string
                        description: "Birth place"
                      age:
                        type: integer
                      gender:
                        type: string
                      islive:
                        type: boolean
                      zodiac_sign:
                        type: string
                      energy_type:
                        type: string
                      strategy:
                        type: string
                      signature:
                        type: string
                      not_self:
                        type: string
                      aura:
                        type: string
                      inner_authority:
                        type: string
                      inc_cross:
                        type: string
                      profile:
                        type: string
                      location:
                        type: string
                      type:
                        type: string
                      authority:
                        type: string
                      total_centers:
                        type: integer
                      defined_centers:
                        type: array
                        items:
                          type: string
                      undefined_centers:
                        type: array
                        items:
                          type: string
                      definition:
                        type: string
                      channels:
                        type: object
                        properties:
                          Channels:
                            type: array
                            items:
                              type: object
                              properties:
                                channel:
                                  type: string
                                  description: "Formatted channel string (e.g. '6/59: Name (Desc)')"
                  composite_changes:
                    type: object
                    properties:
                      new_channels:
                        type: array
                        items:
                          type: object
                          properties:
                            gates:
                              type: string
                            name:
                              type: string
                            description:
                              type: string
                      new_centers:
                        type: array
                        items:
                          type: string
                  planetary_transits:
                    type: array
                    items:
                      type: object
                      properties:
                        planets:
                          type: string
                        gate:
                          type: integer
                        line:
                          type: integer
                        color:
                          type: integer
                        tone:
                          type: integer
                        base:
                          type: integer
                        lon:
                          type: number
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /analyze/composite:
    post:
      summary: Analyze Composite
      description: "Calculate Composite Chart features for exactly 2 people.\nExposes detailed pairwise composite logic including new and duplicated channels/chakras.\n\nInput:\n{\n    \"person1\": { ... },\n    \"person2\": { ... }\n}"
      operationId: analyze_composite_analyze_composite_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties:
                $ref: '#/components/schemas/PersonInput'
              type: object
              title: Inputs
              description: Dictionary of exactly 2 people for Composite analysis.
            example:
              person1:
                place: Berlin, Germany
                year: 1985
                month: 6
                day: 15
                hour: 14
                minute: 30
              person2:
                place: Munich, Germany
                year: 1988
                month: 11
                day: 22
                hour: 9
                minute: 15
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      security:
      - HTTPBearer: []
  /analyze/compmatrix:
    post:
      summary: Analyze Composite Matrix
      description: "Calculate Human Design features for multiple people and analyze their composite combinations (matrix).\n\nInput:\n{\n    \"person1\": { \"place\": \"City, Country\", \"year\": 1990, \"month\": 1, \"day\": 1, \"hour\": 12, \"minute\": 0 },\n    \"person2\": { ... }\n}"
      operationId: analyze_compmatrix_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties:
                $ref: '#/components/schemas/PersonInput'
              type: object
              title: Inputs
              description: Dictionary of people where keys are names (e.g., person1, person2) and values are birth details.
            example:
              person1:
                place: Berlin, Germany
                year: 1985
                month: 6
                day: 15
                hour: 14
                minute: 30
              person2:
                place: Munich, Germany
                year: 1988
                month: 11
                day: 22
                hour: 9
                minute: 15
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      security:
      - HTTPBearer: []
  /analyze/penta:
    post:
      summary: Analyze Penta
      description: "Calculate Penta (Group Analysis) for a group of people. Returns the match percentage and details of active Penta gates.\n\nInput:\n{\n    \"person1\": { \"place\": \"Berlin, Germany\", \"year\": 1985, \"month\": 6, \"day\": 15, \"hour\": 14, \"minute\": 30 },\n    \"person2\": { ... },\n    \"person3\": { ... }\n}"
      operationId: analyze_penta_analyze_penta_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties:
                $ref: '#/components/schemas/PersonInput'
              type: object
              title: Inputs
              description: Dictionary of 3-5 people for Penta analysis.
            example:
              person1:
                place: Berlin, Germany
                year: 1985
                month: 6
                day: 15
                hour: 14
                minute: 30
              person2:
                place: New York, USA
                year: 1980
                month: 2
                day: 10
                hour: 9
                minute: 15
              person3:
                place: London, UK
                year: 1990
                month: 12
                day: 5
                hour: 18
                minute: 45
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
      security:
      - HTTPBearer: []
components:
  schemas:
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          type: array
          title: Detail
      type: object
      title: HTTPValidationError
    PersonInput:
      properties:
        place:
          type: string
          minLength: 1
          title: Place
          description: Place of birth (City, Country)
        year:
          anyOf:
          - type: integer
          - type: string
          title: Year
          description: Birth year (1800-2100)
        month:
          anyOf:
          - type: integer
          - type: string
          title: Month
          description: Birth month (1-12)
        day:
          anyOf:
          - type: integer
          - type: string
          title: Day
          description: Birth day (1-31)
        hour:
          anyOf:
          - type: integer
          - type: string
          title: Hour
          description: Birth hour (0-23)
        minute:
          anyOf:
          - type: integer
          - type: string
          title: Minute
          description: Birth minute (0-59)
        gender:
          type: string
          title: Gender
          description: Gender (optional)
        islive:
          type: boolean
          default: true
          title: Islive
          description: Whether the person is alive (true) or deceased (false)
      type: object
      required:
      - place
      - year
      - month
      - day
      - hour
      - minute
      title: PersonInput
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          type: array
          title: Location
        msg:
          type: string
          title: Message
        type:
          type: string
          title: Error Type
      type: object
      required:
      - loc
      - msg
      - type
      title: ValidationError
    CalculateResponse:
      type: object
      properties:
        general:
          $ref: '#/components/schemas/GeneralOutput'
        channels:
          type: array
          items:
            $ref: '#/components/schemas/ChannelInfo'
        gates:
          type: object
          additionalProperties:
            type: array
            items:
              $ref: '#/components/schemas/GateInfo'
      title: CalculateResponse
    GeneralOutput:
      type: object
      properties:
        birth_date:
          type: string
          title: Birth Date
        create_date:
          type: string
          title: Create Date
        birth_place:
          type: string
          title: Birth Place
        age:
          type: integer
          title: Age
          description: Calculated age in years
        gender:
          type: string
          title: Gender
          default: male
        islive:
          type: boolean
          title: Islive
          description: Whether the person is alive (true) or deceased (false)
          default: true
        zodiac_sign:
          type: string
          title: Zodiac Sign
          description: Western astrological sign
        energy_type:
          type: string
          title: Energy Type
        inner_authority:
          type: string
          title: Inner Authority
        inc_cross:
          type: string
          title: Inc Cross
        profile:
          type: string
          title: Profile
        active_chakras:
          type: array
          items:
            type: string
          title: Active Chakras
        inactive_chakras:
          type: array
          items:
            type: string
          title: Inactive Chakras
        definition:
          type: string
          title: Definition
        variables:
          $ref: '#/components/schemas/Variables'

      required:
      - birth_date
      - create_date
      - energy_type
      - inner_authority
      - inc_cross
      - profile
      - active_chakras
      - inactive_chakras
      - definition
      - variables
      title: GeneralOutput
    VariableDetail:
      type: object
      properties:
        value:
          type: string
          title: Value
        name:
          type: string
          title: Name
        aspect:
          type: string
          title: Aspect
        def_type:
          type: string
          title: Definition Type
      required:
      - value
      - name
      - aspect
      - def_type
      title: VariableDetail
    Variables:
      type: object
      properties:
        top_right:
          $ref: '#/components/schemas/VariableDetail'
        bottom_right:
          $ref: '#/components/schemas/VariableDetail'
        top_left:
          $ref: '#/components/schemas/VariableDetail'
        bottom_left:
          $ref: '#/components/schemas/VariableDetail'
        short_code:
          type: string
          title: Short Code
          description: Standard shorthand for all four variables (e.g., 'PRL DRR')
      required:
      - top_right
      - bottom_right
      - top_left
      - bottom_left
      - short_code
      title: Variables
    GateInfo:
      type: object
      properties:
        gate:
          type: integer
        line:
          type: integer
        color:
          type: integer
        tone:
          type: integer
        base:
          type: integer
        is_active:
          type: boolean
      required:
      - gate
      - line
      - color
      - tone
      - base
      - is_active
      title: GateInfo
    ChannelInfo:
      type: object
      properties:
        name:
          type: string
        gates:
          type: array
          items:
            type: integer
        meaning:
          type: string
      required:
      - name
      - gates
      title: ChannelInfo
  securitySchemes:
    HTTPBearer:
      type: http
      scheme: bearer
