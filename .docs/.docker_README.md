# Docker & Deployment Guide

## Automated Build Script: `build_docker.sh`
This script automates the release process by:
*   Reading the version (e.g., `1.2.0`) from `pyproject.toml`.
*   Logging into Docker.
*   Building the image.
*   Tagging it as both **latest** and **[version]**.
*   Pushing both tags to Docker Hub.

### How to Run
Execute the script from the project root:

```bash
./.docs/build_docker.sh
```

---

## Manual Docker Commands
If you prefer to run commands manually:

```bash
docker login
docker build -t dturkuler/humandesign_api:latest .
docker tag dturkuler/humandesign_api:latest dturkuler/humandesign_api:1.2.0
docker images dturkuler/humandesign_api
docker push dturkuler/humandesign_api:1.2.0
```

---

## CasaOS Deployment

### First Install
1.  Go to **Custom Install**.
2.  Import via `docker-compose.yml`.

### Update Existing Container
1.  Go to `humandesign_api` -> **Settings**.
2.  Update the **Tag** to `latest` or specific version (e.g., `1.2.0`).
3.  Check **Portainer** to cleanup old images (keep only the active one).

---

## Local Development (VS Code)

### Run the API
```bash
./venv/bin/python api.py
```

### Access Documentation
*   **Local:** [http://localhost:8000/docs](http://localhost:8000/docs)
*   **Network:** [http://192.168.100.200:8000/docs](http://192.168.100.200:8000/docs)
